Olá. Neste vídeo, você vai aprender sobre índices. Discutiremos quais são os índices, como eles podem melhorar o desempenho, e os custos de usá-los. Nós também revisaremos os tipos de índice mais comuns. 

Os índices são estruturas de dados especiais que armazenam uma pequena parte dos dados das coleções de uma forma ordenada que é fácil de atravessar e pesquisar de forma eficiente. Os índices apontam para a identidade do documento e permitem que você olhe para cima, acesse e atualize dados mais rápido. Os índices são usados no MongoDB para melhorar o desempenho da consulta. Eles podem acelerar as consultas, reduzir a E/S de disco e reduzir os recursos necessários para eles. 

Os índices também suportam consultas como correspondências de igualdade e operações baseadas em faixa e resultados classificados de retorno. Os índices armazenam dados em um formulário ordenado com base nos campos de índice e ordem de classificação de valor que são fornecidos quando o índice é criado. Sem índices, o MongoDB tem que ler todos os documentos em uma coleção realizando uma varredura de coleta para verificar se ele corresponde à consulta que está sendo executada. Ele também precisa classificar os resultados na memória se a consulta exigir uma saída classificada. 

Ao utilizar um índice, o MongoDB apenas busca os documentos identificados pelo índice com base na consulta e devolve os resultados mais rápido. Se o índice incluir todas as informações que a consulta deseja recuperar, o MongoDB não precisa ler o documento. Por padrão, há apenas um índice criado por coleção. Esse índice padrão apenas inclui o campo _id. Toda consulta deve usar um índice. Desta forma, você pode criar índices adicionais em suas coleções para cobrir suas consultas de dados. 

Esteja ciente de que os índices vêm com um custo de desempenho de gravação. Quando inserimos novos documentos na coleta ou atualizamos os campos de índice neles, também precisamos atualizar os dados na estrutura do índice. Além disso, o desempenho de gravação pode degradar se temos índices demais em uma coleção. Por isso, precisamos ter certeza de que todos os índices que temos estão sendo usados. Caso contrário, devemos excluir os índices desnecessários ou redundantes. 

Agora que cobrimos o básico de indexação, vamos passar por cima dos tipos de índice mais comuns em MongoDB -- índices de campo único e índices compostos. Os índices de campos únicos são índices em um campo apenas. Os índices compostos incluem mais de um campo no índice. Em ambos esses índices, os campos inicial ou prefixo de índice podem ser usados para suportar consultas. Ambos os tipos de índice também podem ser índices multichave se operarem em um campo array. Cada entrada de matriz tem uma entrada de índice correspondente. 

Vamos passar por um exemplo baseado em consultas executadas contra a coleta de clientes. Aqui está um exemplo de um documento desta coleção. A coleta inclui informações sobre os clientes, como o nome de usuário, data de nascimento, se estão ativos, as contas que possuem e outros detalhes sobre a conta. Digamos que geralmente executamos essas consultas de clientes para pesquisar todos os clientes que estão ativos e ter uma conta específica. 

Nesse caso, podemos definir um índice com os campos ativos e de contas para melhorar o desempenho dessas consultas. Como o índice tem dois campos e um deles é um campo array, é um índice composto multichave. Ambas as consultas podem usar este índice. 

Excelente trabalho. Vamos por cima do que você aprende neste vídeo. Os índices são estruturas de dados ordenados que armazenam alguns campos a partir de uma coleção para permitir a recuperação de dados mais rápida e reduzir a computação. Os índices suportam as correspondências de igualdade e operações de consulta baseadas em gama e resultados classificados de retorno. No entanto, eles vêm com um custo de desempenho de gravação. Quando um campo de índice é atualizado ou inserido, a entrada de índice correspondente também deve ser atualizada. Os tipos de índice mais comuns em MongoDB são os índices de campo único e índices compostos. Os índices que operam em um campo array são referidos como índices multichave. 