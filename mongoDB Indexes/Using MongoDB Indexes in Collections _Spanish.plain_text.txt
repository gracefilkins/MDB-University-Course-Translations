Hola. En este vídeo, aprenderás sobre los índices. Discutiremos qué son los índices, cómo pueden mejorar el rendimiento y los costos de usarlos. También revisaremos los tipos de índice más comunes. 

Los índices son estructuras de datos especiales que almacenan una pequeña parte de los datos de colecciones en una forma ordenada que es fácil de recorrer y buscar de forma eficiente. Los índices apuntan a la identidad del documento y le permiten buscar, acceder y actualizar datos más rápidamente. Los índices se utilizan en MongoDB para mejorar el rendimiento de las consultas. Pueden acelerar las consultas, reducir la E/S de disco y reducir los recursos necesarios para ellos. 

Los índices también dan soporte a consultas como, por ejemplo, coincidencias de igualdad y operaciones basadas en rango y devuelven resultados ordenados. Los índices almacenan datos en un formulario ordenado basándose en los campos de índice y en el orden de clasificación de valores que se proporcionan cuando se crea el índice. Sin índices, MongoDB tiene que leer cada documento de una colección realizando una exploración de recopilación para comprobar si coincide con la consulta que se está ejecutando. También necesita clasificar los resultados en la memoria si la consulta requiere una salida ordenada. 

Cuando se utiliza un índice, MongoDB sólo capta los documentos identificados por el índice basándose en la consulta y devuelve los resultados más rápidamente. Si el índice incluye toda la información que la consulta desea recuperar, MongoDB no necesita leer el documento. De forma predeterminada, sólo hay un índice creado por colección. Este índice predeterminado sólo incluye el campo _id. Cada consulta debe utilizar un índice. De este modo, puede crear índices adicionales en las colecciones para cubrir las consultas de datos. 

Tenga en cuenta que los índices tienen un coste de rendimiento de escritura. Cuando insertamos nuevos documentos en la colección o actualizamos los campos de índice en ellos, también necesitamos actualizar los datos en la estructura de índice. Además, el rendimiento de escritura puede degradarse si tenemos demasiados índices en una colección. Así que tenemos que asegurarnos de que todos los índices que tenemos están siendo utilizados. De lo contrario, deberíamos suprimir los índices innecesarios o redundantes. 

Ahora que hemos cubierto los fundamentos de la indexación, vamos a repasar los tipos de índices más comunes en MongoDB -- índices de campo individuales e índices compuestos. Los índices de un solo campo son índices en un solo campo. Los índices compuestos incluyen más de un campo en el índice. En ambos índices, se pueden utilizar los campos de inicio o el prefijo de índice para dar soporte a las consultas. Ambos tipos de índice también pueden ser índices de varias claves si operan en un campo de matriz. Cada entrada de matriz tiene una entrada de índice correspondiente. 

Vamos a través de un ejemplo basado en consultas dirigidas contra la colección de clientes. Aquí hay un ejemplo de un documento de esta colección. La colección incluye información sobre los clientes, como el nombre de usuario, fecha de nacimiento, si están activos, las cuentas que tienen, y otros detalles sobre la cuenta. Digamos que normalmente ejecutamos estas consultas de clientes para buscar a todos los clientes que están activos y tienen una cuenta específica. 

En este caso, podemos definir un índice con los campos activos y de cuentas para mejorar el rendimiento de estas consultas. Debido a que el índice tiene dos campos y uno de ellos es un campo de matriz, es un índice compuesto de varias claves. Ambas consultas pueden utilizar este índice. 

Excelente trabajo. Vamos a repasar lo que se aprende en este vídeo. Los índices son estructuras de datos ordenadas que almacenan algunos campos de una colección para permitir una recuperación de datos más rápida y reducir el cálculo. Los índices soportan coincidencias de igualdad y operaciones de consulta basadas en rango y devuelven resultados ordenados. Sin embargo, vienen con un coste de rendimiento de escritura. Cuando se actualiza o inserta un campo de índice, también se debe actualizar la entrada de índice correspondiente. Los tipos de índice más comunes en MongoDB son los índices de campo único e índices compuestos. Los índices que operan en un campo de matriz se denominan índices multiclave. 